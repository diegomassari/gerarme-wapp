{"ast":null,"code":"var _jsxFileName = \"/Users/massari/Code/gerarme-wapp/src/components/configs/FormCategories.js\";\nimport React from 'react';\nimport { getToken, getUser } from \"../../services/auth\";\nimport api from \"../../services/api\";\nimport 'react-image-crop/dist/ReactCrop.css';\n\nclass FormCategories extends React.Component {\n  constructor() {\n    super();\n\n    this.handleSubmit = async e => {\n      e.preventDefault();\n      const _this$state = this.state,\n            categoriesPrimary = _this$state.categoriesPrimary,\n            categoriesSecondary = _this$state.categoriesSecondary,\n            userId = _this$state.userId;\n      const categories = [this.state.category1, this.state.category2];\n\n      if (!categoriesPrimary || !userId) {\n        this.setState({\n          error: \"Escolha a categoria principal antes de salvar\"\n        });\n      } else {\n        try {\n          console.log('foi');\n          const response = await api.post(\"/api/user/attachcategories\", {\n            categories,\n            userId\n          });\n\n          if (response.status === 200) {\n            console.log('foi');\n            console.log(response.data);\n          } else {\n            console.log('error on saving');\n            console.log(response);\n          } //login(responseLogin.data.access_token)\n          //this.props.history.push(\"/\")\n\n        } catch (err) {\n          this.setState({\n            error: \"Houve um problema com o login, verifique suas credenciais. T.T\"\n          });\n        }\n      }\n    };\n\n    this.state = {\n      isLoading: true,\n      categoriesPrimary: [],\n      categoriesSecondary: [],\n      category1: null,\n      category2: null,\n      userId: null\n    };\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  handleChange(event) {\n    const _event$target = event.target,\n          name = _event$target.name,\n          value = _event$target.value,\n          type = _event$target.type,\n          checked = _event$target.checked;\n    type === \"checkbox\" ? this.setState({\n      [name]: checked\n    }) : this.setState({\n      [name]: value\n    });\n  }\n\n  componentDidMount() {\n    fetch(\"http://gerarme-api.test/api/postcategories\", {\n      method: 'GET',\n      headers: {\n        'Authorization': 'Bearer' + getToken()\n      }\n    }).then(response => response.json()).then(data => {\n      this.setState({\n        isLoading: false,\n        categoriesPrimary: data,\n        categoriesSecondary: data\n      });\n    });\n    this.setState({\n      userId: getUser()\n    });\n  }\n\n  render() {\n    const availableCategoriesPrimary = this.state.categoriesPrimary.map(cat => React.createElement(\"option\", {\n      key: cat.id,\n      value: cat.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, cat.name));\n    const availableCategoriesSecondary = this.state.categoriesSecondary.map(cat => React.createElement(\"option\", {\n      key: cat.id,\n      value: cat.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, cat.name));\n    return React.createElement(\"div\", {\n      className: \"panel\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"panel-heading\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      className: \"panel-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \"Categorias\")), React.createElement(\"div\", {\n      className: \"panel-body container-fluid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row row-lg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-lg-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, \"Categoria #1 \", React.createElement(\"small\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, \"Obrigat\\xF3ria\")), React.createElement(\"select\", {\n      name: \"category1\",\n      className: \"form-control\",\n      \"aria-hidden\": \"true\",\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      key: \"\",\n      value: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }), availableCategoriesPrimary)), React.createElement(\"div\", {\n      className: \"col-lg-12\",\n      style: {\n        marginTop: 15\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, \"Categoria #2 \", React.createElement(\"small\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, \"Opcional\")), React.createElement(\"select\", {\n      name: \"category2\",\n      className: \"form-control\",\n      \"aria-hidden\": \"true\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      key: \"\",\n      value: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }), availableCategoriesSecondary)), React.createElement(\"div\", {\n      className: \"col-lg-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"text-help\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, \"Caso n\\xE3o encontre uma categoria para seu neg\\xF3cio, solicite a cria\\xE7\\xE3o por \", React.createElement(\"a\", {\n      style: {\n        cursor: 'pointer'\n      },\n      \"data-target\": \"#exampleFormModal\",\n      href: \"/\",\n      \"data-toggle\": \"modal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"u\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, \"aqui\")), \".\"))), React.createElement(\"input\", {\n      type: \"submit\",\n      className: \"btn btn-success mt-20\",\n      value: \"Salvar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default FormCategories;","map":{"version":3,"sources":["/Users/massari/Code/gerarme-wapp/src/components/configs/FormCategories.js"],"names":["React","getToken","getUser","api","FormCategories","Component","constructor","handleSubmit","e","preventDefault","state","categoriesPrimary","categoriesSecondary","userId","categories","category1","category2","setState","error","console","log","response","post","status","data","err","isLoading","handleChange","bind","event","target","name","value","type","checked","componentDidMount","fetch","method","headers","then","json","render","availableCategoriesPrimary","map","cat","id","availableCategoriesSecondary","marginTop","cursor"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { getToken, getUser } from \"../../services/auth\"\nimport api from \"../../services/api\"\nimport 'react-image-crop/dist/ReactCrop.css'\n\nclass FormCategories extends React.Component {\n    constructor(){\n        super()\n        this.state = {\n            isLoading: true,\n            categoriesPrimary: [],\n            categoriesSecondary: [],\n            category1: null,\n            category2: null,\n            userId: null\n        }\n        this.handleChange = this.handleChange.bind(this)\n    }\n\n    handleChange(event) {\n        const {name, value, type, checked} = event.target\n        type === \"checkbox\" ? this.setState({ [name]: checked }) : this.setState({ [name]: value })\n    }\n\n    componentDidMount(){\n        fetch(\"http://gerarme-api.test/api/postcategories\", {\n                method: 'GET',\n                headers: {\n                'Authorization': 'Bearer' + getToken()\n                }\n            }) \n        .then(response => response.json())\n        .then(data => {\n            this.setState({isLoading: false, categoriesPrimary: data, categoriesSecondary: data})\n        })\n\n        this.setState({userId: getUser()})\n    }\n\n    handleSubmit = async e => {\n\n        e.preventDefault();\n        const { categoriesPrimary, categoriesSecondary, userId } = this.state\n\n        const categories = [this.state.category1, this.state.category2]\n\n        if (!categoriesPrimary || !userId) {\n            this.setState({ error: \"Escolha a categoria principal antes de salvar\" })\n        } else {\n            try {\n\n                console.log('foi')\n                const response = await api.post(\"/api/user/attachcategories\", { categories, userId })\n\n                if(response.status === 200){\n                    console.log('foi')\n                    console.log(response.data)\n                } else {\n                    console.log('error on saving')\n                    console.log(response)\n                }\n\n                //login(responseLogin.data.access_token)\n                //this.props.history.push(\"/\")\n\n            } catch (err) {\n                this.setState({\n                error:\n                    \"Houve um problema com o login, verifique suas credenciais. T.T\"\n                })\n            }\n        }\n\n    }\n\n    render(){\n\n        const availableCategoriesPrimary = this.state.categoriesPrimary.map((cat) => \n                <option key={cat.id} value={cat.id} >{cat.name}</option>\n            );\n        const availableCategoriesSecondary = this.state.categoriesSecondary.map((cat) => \n                <option key={cat.id} value={cat.id}>{cat.name}</option>\n            );\n\n        return(\n            <div className=\"panel\">\n                <div className=\"panel-heading\">\n                    <h3 className=\"panel-title\">Categorias</h3>\n                </div>\n                <div className=\"panel-body container-fluid\">\n                    <form onSubmit={this.handleSubmit}>                      \n                        <div className=\"row row-lg\">\n                            <div className=\"col-lg-12\">\n                                <label>Categoria #1 <small>Obrigatória</small></label>\n                                <select name=\"category1\" className=\"form-control\" aria-hidden=\"true\" required>\n                                    <option key=\"\" value=\"\"></option>\n                                    {availableCategoriesPrimary}\n                                </select>\n                            </div>\n                            <div className=\"col-lg-12\" style={{marginTop: 15}}>\n                                <label>Categoria #2 <small>Opcional</small></label>\n                                <select name=\"category2\" className=\"form-control\" aria-hidden=\"true\">\n                                    <option key=\"\" value=\"\"></option>\n                                    {availableCategoriesSecondary}\n                                </select>\n                            </div>\n                            <div className=\"col-lg-12\">\n                                <span className=\"text-help\">Caso não encontre uma categoria para seu negócio, solicite a criação por <a style={{cursor: 'pointer'}} data-target=\"#exampleFormModal\" href=\"/\" data-toggle=\"modal\"><u>aqui</u></a>.</span>\n                            </div>\n                        </div> \n                        <input type=\"submit\" className=\"btn btn-success mt-20\" value=\"Salvar\" />\n                    </form>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default FormCategories"]},"metadata":{},"sourceType":"module"}